---
title: "Interactive Mapping"
author: "Yanan Wu"
date: "2024-09-28"
output: html_document
---


## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

## Insert Chunk

```{r}
# ctrl+alt+I
```

## Load leaflet package

```{r setup, include=FALSE}
if (!require('leaflet')) install.packages('leaflet')

library(leaflet)
```

## Add basemap

The function leaflet() is called, followed by different layers with add*(). The pipe operator %>% is used to add layers on top of each other.

```{r basemap, fig.height=10, fig.width=15, paged.print=TRUE}
basemap <- leaflet() %>%
  addProviderTiles(
    "CartoDB.Positron",
    group = "CartoDB"
  )  %>%
  addProviderTiles(
    "OpenStreetMap",
    # give the layer a name
    group = "OpenStreetMap"
  ) %>% 
  addProviderTiles(
    "Esri.WorldImagery",
    group = "Imagery"
  )

basemap
```

## Exercise 01: Set initial view for basemap

Using [setView()](https://www.rdocumentation.org/packages/leaflet/versions/2.2.2/topics/setView) to set up the view of map (center and zoom level) 

Using the center of Worcester

```{r}
basemap %>% setView()
```

## Exercise 02: Add UI Control

Using [addLayersControl](https://www.rdocumentation.org/packages/leaflet/versions/2.2.2/topics/addLayersControl) to switch layers on and off.
Two important parameters: baseGroups and position

```{r}

```

## Add single marker or AwesomeIcon

You can place a marker on the plot by providing coordinates through the lng (longitude) and lat (latitude) arguments of the addMarkers function. This function accepts either a single value or a vector of values for each argument.

```{r}
icon.home <- makeAwesomeIcon(
  icon = "home", markerColor = "blue",
  library = "fa",
  iconColor = "white"
)

basemap %>%
  addAwesomeMarkers(
    lat = 42.252,
    lng =  -71.824,
    label = "Home",
    icon = icon.home
  )
```

## Read data about Parks' location in Worcester, MA

Worcester, MA, is home to numerous parks that offer a variety of amenities, enriching the quality of life for its residents. The data below represents a selection of parks in the city and serves as a demonstration for educational purposes. It does not encompass all parks in Worcester.

```{r}
parks = read.csv('D:\\GitRepo\\ssj-30262\\docs\\Lectures\\Week06_R_Mapping\\parks.csv')
head(parks)
```
## Using addMarker to add Parks to the basemap

```{r}
basemap %>% addMarkers(lng = parks$x, lat = parks$y)
```

## Using makeAwesomeIcon to add Parks to the basemap
```{r}
icons_list <- icons(iconUrl = 'https://fontawesome.com/icons/tree?f=classic&s=solid',
                     iconWidth = 50, iconHeight = 50)


basemap %>% addMarkers(lng = parks$x, lat = parks$y, icon = icons_list)
```


## Add Polygon

Before Add shapefile, Please transform your map to the leaflet projection

Step 1: Check the projection of the leaflet Map

```{r}
print(c('projection of basemap: ',  basemap$x$options$crs$crsClass))

```

```{r}

```













